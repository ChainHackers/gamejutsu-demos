import { describe, expect, test } from '@jest/globals';
import { MockProvider } from 'mock-ethers-provider';
import { ethers } from 'ethers';

import arbiterAbi from 'eth-sdk/abis/polygon/arbiter.json';

const signedgameMove = {
  gameMove: {
    oldState:
      '0x00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
    nonce: 4,
    gameId: 308,
    move: '0x0000000000000000000000000000000000000000000000000000000000000006',
    player: '0xDb0b11d1281da49e950f89bD0F6B47D464d25F91',
    newState:
      '0x00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000',
  },
  signatures: [
    '0xdba71c7cb6bc6067a310a3995bd7a5121389c776e53515a2d328dfe972840eb06d9caaa3bdaf5da5eb396f5cc7c67309619c4f8d907ee72c695bcedf98f0de971b',
  ],
};

const address = '0x1f0b6DB015198028d57Eb89785Fc81637f1e72F5';
describe('block1', () => {
  test('test1', () => {
    const mock = new MockProvider();
    mock.setMockContract('0x1f0b6DB015198028d57Eb89785Fc81637f1e72F5', arbiterAbi);

    mock.stub('0x1f0b6DB015198028d57Eb89785Fc81637f1e72F5', 'isValidSignedMove', true);

    const contract = new ethers.Contract(address, arbiterAbi, mock);

    contract.isValidSignedMove(signedgameMove).then((result: boolean) => {
      expect(result).toBeTruthy;
    });
  });
});
